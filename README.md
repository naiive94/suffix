# suffix
分析四则运算表达式并计算的计算器。
相关Java代码放在`calclib`库里。

##目标

输入四则运算表达式，返回计算结果。其中

* 数字为整数;
* 支持括号优先级;
* 支持负数;
* 考虑错误处理，如括号不配对、连续的运算符、零除等。

##过程

普通的四则运算表达式为中缀表达式，万幸数据结构课上我没全走神，还记得这种情况下要将中缀转换为易于计算机处理的后缀表达式。所以搜索得到『调度场算法(Shunting Yard Algorithm)』：

>
 * 中缀表达式转换为后缀表达式（逆波兰表达式），即调度场算法(shunting yard algorithm)
 * 1.建立运算符栈用于运算符的存储，此运算符遵循越往栈顶优先级越高的原则。
 * 2.预处理表达式，正、负号前加0(如果一个加号（减号）出现在最前面或左括号后面，则该加号（减号） 为正负号)。
 * 3.顺序扫描表达式，如果当前字符是数字（优先级为0的符号），则直接输出该数字；如果当前字符为运算符或者括号（优先级不为0的符号），则判断第四点。
 * 4.1 若当前运算符为'('，直接入栈；
 * 4.2 若为')'，出栈并顺序输出运算符直到遇到第一个'(',遇到的第一个'('出栈但不输出；
 * 4.3 若为其它，比较运算符栈栈顶元素与当前元素的优先级：
 * 4.3.1 如果栈顶元素是'('，当前元素直接入栈；
 * 4.3.2 如果栈顶元素优先级>=当前元素优先级，出栈并顺序输出运算符直到栈顶元素优先级<当前元素优先级，然后当前元素入栈；
 * 4.3.3 如果栈顶元素优先级<当前元素优先级，当前元素直接入栈。
 * 5.重复第三点直到表达式扫描完毕。
 * 6.顺序出栈并输出运算符直到栈元素为空。

 据此实现`Expression`类中的`convertPostfix()`方法。
 
另外还可以根据中缀表达式构造一棵二叉树，叶子节点放操作数，根节点放操作符，根据遍历顺序的不同可以获得前缀和后缀表达式。由```BinaryExpression```类实现。

##结果
``` java
public static void main(String[] args) {
        String infix = "-(-1+23)*8-(9+3)/4";  //result -179

        Expression expression = ExpressionFactory.createShuntingExp();
        int result = expression.infix2Result(infix);

        System.out.print(result + "");

}

```

```
0-(0-1+23)*8-(9+3)/4
-179
Process finished with exit code 0
```





